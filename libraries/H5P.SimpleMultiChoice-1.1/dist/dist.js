!function(e){function t(i){if(n[i])return n[i].exports;var a=n[i]={exports:{},id:i,loaded:!1};return e[i].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";H5P.SimpleMultiChoice=n(1).default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();n(3);var l=n(2),u=i(l),d=0,h=function(e){function t(e){var n=e.question,i=e.alternatives,c=void 0===i?[]:i,s=e.inputType,l=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{});a(this,t);var h=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return h.uniqueName="h5p-simple-multiple-choice-"+d,d+=1,h.listItems=[],h.feedbackElements=[],h.state=c.map(function(e,t){return{id:t,text:e.text,checked:!1}}),h.hasFeedback=c.some(function(e){return e.feedback.chosenFeedback||e.feedback.notChosenFeedback}),h.feedbackShown=!1,h.xapiGenerator=new u.default({question:n,alternatives:c}),h.attach=function(e){var t=document.createElement("div");t.className="h5p-simple-multiple-choice";var n=document.createElement("div");n.classList.add("h5p-simple-multiple-choice-question"),n.classList.add("h5p-subcontent-question");var i=this.createQuestion(this.uniqueName);n.appendChild(i),t.appendChild(n);var a=this.createAlternativesList(this.uniqueName);t.appendChild(a),e.get(0).appendChild(t)},h.createQuestion=function(e){var t=document.createElement("div");return t.id=e,t.innerHTML=n,t},h.handleInputChange=function(e){this.feedbackShown&&(this.feedbackElements.forEach(function(e){e.parentNode.removeChild(e)}),this.feedbackElements=[],this.feedbackShown=!1,this.trigger("allow-finish-changed")),this.state=this.state.map(function(t,n){var i=n===e;return"radio"!==s&&(i=n===e?!t.checked:t.checked),o({},t,{checked:i})}),this.trigger("changed");var t=this.createXAPIEventTemplate("interacted"),n=this.xapiGenerator.generateXApi(t,this.state);this.trigger(n)},h.createAlternativesList=function(e){var t=this,n=["Motivated","Calm","Discouraged","Uneasy","Joyful","Satisfied","Bored","Stressed"],i=this.state.map(function(e){return e.text}),a=n.filter(function(e){return i.includes(e)});if(!this.state.length){var r=document.createElement("div");return r.className="h5p-simple-multiple-choice-alternatives-error",r.textContent="ERROR: No alternatives chosen",r}var c=document.createElement("ul");return c.classList.add("h5p-simple-multiple-choice-alternatives"),c.classList.add("h5p-subcontent-body"),c.classList.add("review-btns"),a.length>0&&c.classList.add("emoicons"),c.setAttribute("role","listbox"),c.setAttribute("aria-labelledby",e),this.state.forEach(function(e){var n=e.id,i=e.text,a=e.checked,r=document.createElement("li");r.className="h5p-simple-multiple-choice-alternative-li";var o=document.createElement("label"),l=document.createElement("input"),u=document.createElement("span");l.setAttribute("id","simple-multichoice-"+n),o.setAttribute("for","simple-multichoice-"+n),l.className="h5p-simple-multiple-choice-alternative-input",l.type=s||"checkbox",l.name=t.uniqueName,a&&l.setAttribute("checked","checked"),o.addEventListener("change",t.handleInputChange.bind(t,n)),o.appendChild(l),o.classList.add("emotican-"+i.replace(/\s/g,"")),u.innerHTML+=i,o.appendChild(u),r.appendChild(o),c.appendChild(r),t.listItems.push(r)}),c},h.getCurrentState=function(){return u.default.getResultPattern(this.state)},h.restorePreviousState=function(){var e=this;if(l.previousState){var t=l.previousState.split("[,]");t.forEach(function(t){e.state[t].checked=!0})}},h.allowFinish=function(){return this.hasFeedback?this.hasFeedback&&this.feedbackShown?t.AllowFinish.ALLOW:t.AllowFinish.DENY:t.AllowFinish.ALWAYS},h.finish=function(){var e=this;return c.forEach(function(t,n){if(t.feedback){var i=void 0,a=e.state[n].checked;if(a&&t.feedback.chosenFeedback?i=t.feedback.chosenFeedback:!a&&t.feedback.notChosenFeedback&&(i=t.feedback.notChosenFeedback),i){var r=document.createElement("div");r.className="h5p-simple-multiple-choice-alternative-feedback "+(a?"chosen":"not-chosen"),r.innerHTML=i,e.feedbackElements.push(r),e.listItems[n].appendChild(r)}}}),this.feedbackShown=!0,0===this.feedbackElements.length},h.restorePreviousState(),h}return c(t,e),s(t,null,[{key:"AllowFinish",get:function(){return{ALWAYS:0,DENY:1,ALLOW:2}}}]),t}(H5P.EventDispatcher);t.default=h},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(t){var i=t.question,a=t.alternatives;n(this,e);var r=a.map(function(e,t){return{id:""+t,description:{"en-US":e.text}}});this.event={description:{"en-US":i},type:"http://adlnet.gov/expapi/activities/cmi.interaction",interactionType:"choice",choices:r}}return a(e,[{key:"generateXApi",value:function(t,n){var a=e.getResultPattern(n),r=t.data.statement;if(i(r,{result:{response:a}}),r.object){var c=r.object.definition;i(c,this.event)}return t}}],[{key:"getResultPattern",value:function(e){return e.reduce(function(e,t,n){return t.checked&&(e+=(e.length?"[,]":"")+n),e},"")}}]),e}();t.default=r},function(e,t){}]);